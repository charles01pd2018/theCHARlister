// utils
@use '../utils/selectors/tap' as *;


.project-preview {
    --highlight: white;

    $transition-timing: 0.75s;
    $border-radius: 8px;

    position: relative;
    mix-blend-mode: multiply;

    .iframe {
        // matches time of _StaggeredText transition
        $transition: $transition-timing cubic-bezier(0.38, 0.26, 0.05, 1.07);

        border-radius: $border-radius;
        pointer-events: none;
        
        // TODO - map through colors for box shadows
        box-shadow: 0px 0.4px 2.2px rgba(0, 0, 0, 0.02),
                    0px 1px 5.3px rgba(0, 0, 0, 0.028),
                    0px 1.9px 10px rgba(0, 0, 0, 0.035),
                    0px 3.4px 17.9px rgba(0, 0, 0, 0.042),
                    0px 6.3px 33.4px rgba(0, 0, 0, 0.05),
                    0px 15px 80px rgba(0, 0, 0, 0.07);

        transition: box-shadow $transition,
                    filter $transition;
    }

    .overlay {
        position: absolute;
        top: 0;
        width: 100%;
        background: rgba(0,0,0,0.5);
        border-radius: $border-radius;
        transform-origin: left;
        transform: scaleX( 0 );

        transition: transform 0.5s cubic-bezier(0.66, 0.08, 0.19, 0.97);

        .text-wrapper {
            position: absolute;
            bottom: 0;
            padding-inline: 1rem;
            padding-block: 2rem 5rem;
            color: white;
        }

        &:after {
            $transition: 0.21s ease-in-out;

            content: 'âžœ';
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            font-size: 150%;
            opacity: 0;
            transform: translateY( 5px );
            // TODO - customize color based off project type
            color: white;
            // idk why i need !important
            transition-delay: $transition-timing !important;

            transition: opacity $transition,
                        transform $transition;
        }
    }

    @include tap {
        .overlay {
            transform: scaleX(1);

            .text-wrapper {
                span {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            &:after {
                opacity: 1;
                transform: translateY( 0 );
            }
        }

        .iframe {
            // TODO - map through colors for box shadows
            box-shadow: white 0 5vw 6vw -9vw,
                        var(--highlight) 0 5.5vw 5vw -7.5vw,
                        rgba(50, 50, 80, 0.5) 0px 4vw 8vw -2vw, 
                        rgba(0, 0, 0, 0.8) 0px 4vw 5vw -3vw;

                        box-shadow: inset 0 0 0 200px rgba(255,255,255,0.05);
                        filter: blur(3px);
        }
        
        &:nth-of-type(1) {
          --highlight: coral;
        }
        
        &:nth-of-type(2) {
          --highlight: #56ffe5;
        }
    }
}